# LiveStreamAI

基于ChatGPT的直播AI(~~新概念挖矿~~)

## Requirement

- OpenAI API Key
- Node环境

## 使用说明

1. 下载源码

```bash
git clone https://github.com/xwy27/LiveStreamAI.git
```

2. 安装依赖

```bash
cd LiveStreamAI
npm install
```

3. 修改配置

在`bin/config`目录下创建`key.js`，并将OpenAI的api key写入文件中。目录下有示例文件`key_example.js`。`可选：UP的风格，通过修改，data目录下的data.json文件中的prompt`。

4. 启动

```bash
npm start
```

4. 使用

先打开直播，然后记下房间号（如直播链接`https://live.bilibili.com/139?...`中的`139`为房间号）。
然后在浏览器访问`http://localhost:3000/index`，并将房间号输入页面，点击启动，即可抓取弹幕并完成回复。

5. 开发调试

*对于开发人员，项目提供了热更新启动命令：`npm run dev`。每当你对`bin`目录下的文件进行了修改，项目会自动重启，而不必手动关闭后再启动*。

## Q&A

1. 为什么声音那么难听？

  `简单起见，这里直接用了Web Speech API，输出受限。所以这里是一个很大的优化方向：本身可以直接在后台完成语音输出，没必要透传到前端；同时后台语音输出可以使用模型给出更风格化的语音。`

2. 为什么没有皮套？

  `没有接触过，有能力的朋友可以来上一套。`

3. 对话历史是怎么存的？

  `利用json文件为每个用户单独存历史对话信息。最好替换成数据库，如MySQL，穷学生电脑折腾不起了。`

4. 还有可以做的吗？

  `有很多，比如前面提到的几个问题，还有:`
  `1.代码优化(代码里面有很多TODO，作者对JavaScript并不熟悉，很多代码写得不好)`
  `2.弹幕流展示(方便使用查看)`
  `3.数据文件定期清理(互动数据会不断积累，但并非都是有用的历史对话信息)`
  `4.更合理的弹幕输入(目前采取FIFO模式并回调下一个，同时为保证实时性，回调时过滤10s前的弹幕)`
  `5.更多的互动形式`
  `6....`
